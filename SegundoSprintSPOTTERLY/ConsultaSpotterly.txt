
DROP TABLE IF EXISTS usuario;
DROP table IF EXISTS suscripcion;
DROP table IF EXISTS ubicaciones;

CREATE TABLE usuario (
	telefono INT(9),
	nombre VARCHAR(50),
	password VARCHAR(100) NOT NULL,
	tiene_suscripcion BOOLEAN DEFAULT FALSE NOT NULL,
	suscripcionid INT(10),
	usos INT(3) DEFAULT 2,
  	pregunta_seguridad VARCHAR(100) NULL,
  	respuesta_seguridad VARCHAR(100) NULL,
	PRIMARY KEY (telefono),
	FOREIGN KEY (suscripcionid) REFERENCES suscripcion(suscripcionid)
);

CREATE TABLE suscripcion (
	suscripcionid INT AUTO_INCREMENT,
	tipo VARCHAR(50) NOT NULL,
	fecha_inicio DATE NOT NULL,
	fecha_fin DATE NOT NULL,
	activa BOOLEAN DEFAULT TRUE NOT NULL,
	usuario_principal INT(9) NOT NULL,
	PRIMARY KEY (suscripcionid),
	FOREIGN KEY (usuario_principal) REFERENCES usuario(telefono)
);

CREATE TABLE ubicaciones(
	ubicacionid INT AUTO_INCREMENT,
  	latitud FLOAT(2,6),
  	longitud FLOAT(2,6),
  	valoracion INT(1),
    usuario INT(9),
  	PRIMARY KEY (ubicacionid),
    FOREIGN KEY (usuario) REFERENCES ususario(telefono)
);

